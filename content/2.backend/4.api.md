# API

Endpoints definidos para poder realizar acciones desde los distinos frontends.

La convención que se ha seguido para nombrar los endpoints se encuentra [aquí](https://restfulapi.net/resource-naming/).

## Autentificación

::alert{type="info"}
`GET` /auth/google
::

Esta ruta se encrga de manera automática (gracias a passport) de generar una página de inicio de sesión
Devuelve un objeto de sesión con los datos del usuario más infomración [aquí](https://www.passportjs.org/concepts/authentication/oauth/) 

## Usuarios

Todas las peticiones a estas rutas se comproban si previamente el usuario a iniciado sesión de no ser así primero se le redirige al inicio de sesión.

Además el usuario que solicita estas rutas debe coincidr con el usuario que se quiere comprobar, modificar o eliminar su información.
<hr>

::alert{type="info"}
`GET` /users/:id
::

Permite a un usuario acceder a su propia información.

<hr>

::alert{type="warning"}
`PUT` /users/:id
::

Permite editar los datos asociados a un usuario.

<hr>

::alert{type="danger"}
`DELETE` /users/:id
::

Permite eliminar un usuario.

## Juegos

Todas las peticiones a estas rutas han de incluir un campo `jwt` con el token JWT dado por /auth

<hr>

::alert{type="success"}
`POST` /games
::

Permite a un usuario crear una partida, devuelve un código de juego que deberá ser compartido con el resto de jugadores para que se puedan unir a la partida. En el cuerpo de la petición tiene que haber los siguientes parámetros:

- `jwt`
- `player`: Identificador del jugador que crea la partida y que será el encargado de iniciarla

<hr>

::alert{type="info"}
`GET` /games/:id
::

Permite a un usuario acceder al estado de una partida dada por `id` para actualizar la visualización en el lado del cliente.

<hr>

::alert{type="success"}
`POST` /games/:id/attacks
::

Permite a un usuario atacar un territorio en una partida dada por `id`. Tiene tres parámetros en el cuerpo de la petición:

- `player`: Identificador del jugador que está atacando
- `territoryFrom`: Territorio desde el que se ataca
- `territoryTo`: Territoio al que se ataca


